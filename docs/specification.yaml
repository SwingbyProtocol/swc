openapi: 3.0.0
info:
  description: "Swingby Witness Component(SWC) specification"
  version: "1.0.0"
  title: "swc specification"
  contact:
    email: ""
servers:
  - url: http://35.247.144.116:3000/api/v1
  - url: http://localhost:3000/api/v1
    description: Localhost (uses test data)

paths:
  /status:
    get:
      description: Status route, so we can check if server is alive
      tags:
        - Status
      responses:
        200:
          description: "Server is alive"
          content:
            application/json:
              schema:
                type: object
                properties:
                  health:
                    type: boolean
                  date:
                    type: string
                example:
                  health: true
                  date: "2018-02-19T15:36:46.758Z"
  /metaTxRelay/{tokenAddress}:
    get:
      parameters:
        - in: path
          name: tokenAddress # Note the name is the same as in the path
          required: true
          schema:
            type: string
          example: "0x45e9932fd308346cb9157f8bf5937437bf39bb4c"
          description: The token address
        - in: query
          name: signer
          required: true
          schema:
            type: string
          description: transaction signer
      description: "test"
      tags:
        - Status
      responses:
        200:
          description: GET
          content:
            application/json:
              schema:
                example:
                  result: true
                  token:
                    address: "0x45E9932fD308346CB9157F8bF5937437Bf39BB4C"
                  signer:
                    address: "0xd2330a9f6dDe4715F540D1669bf75E89a1b4FbBc"
                    nextNonce: "1"
                    latestBalance: "118198599972998000000000000"
                  relayer:
                    address: "0xb38f6C9d887b038038aa0272a4cd15c75B28E781"
                    tokenReceiver: "0xCC8690540faE802A251945556817D49a96990f44"
                    gasPrice: "4000000000"
                    gasLimit: "200000"
                    tokenPrice: "100000000000000000"

    post:
      parameters:
        - in: path
          name: tokenAddress # Note the name is the same as in the path
          required: true
          schema:
            type: string
          description: The token address
      description: "test"
      tags:
        - Status
      requestBody:
        description: Optional description in *Markdown*
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                from:
                  type: string
                  required: true
                  example: "0xd2330a9f6dDe4715F540D1669bf75E89a1b4FbBc"
                to:
                  type: string
                  required: true
                  example: "0x7D0344e0ee6bC3901F4b11b9d9b8D001b49872A1"

                amount:
                  type: string
                  required: true
                  example: "20000000000000000000"
                  description: "using BigNumber"
                inputs:
                  type: array
                  example: ["4000000000", "200000", "100000000000000000", "1"]
                  items:
                    type: string
                    required: true
                    description: "using BigNumber [0 => _gasPrice, 1 => _gasLimit, 2 => _gasTokenPerWei, 3 => _nonce]"
                relayer:
                  type: string
                  example: "0xb38f6C9d887b038038aa0272a4cd15c75B28E781"
                  required: true
                v:
                  type: string
                  required: true
                  example: "28"
                r:
                  type: string
                  required: true
                  example: "0x9b94e91c90cb884eacb312140ec2e70a015a293abd49631ac5ffdae017cb0b4e"
                s:
                  type: string
                  required: true
                  example: "0x36e66e4b33d54c16d583311eeaa6c1894302dba23046e6de91ce62e0c9ce3f60"

      responses:
        200:
          description: OK

  /submitLenderTxRelay/{tokenAddress}:
